# 開発フロー

## リファクタリングのステップ

以下の4つのステップでリファクタリングを進める。

### ステップ1：認証機能の削除

Clerkによる認証機能を削除し、ユーザー登録・ログイン機能をなくす。

- **タスク:**
    1. `@clerk/nextjs` パッケージのアンインストール
    2. `middleware.ts` から認証関連の処理を削除
    3. 認証に依存しているコンポーネントの修正または削除
    4. `User` モデル及び関連モデルの扱いを再検討
    5. ユーザー関連のバックエンド処理を修正

### ステップ2：UIフレームワークの導入と統一

UIを`shadcn/ui`に統一し、高校生向けに刷新する。

- **目標:**
    *   既存のカスタムUIコンポーネントを`shadcn/ui`のコンポーネントに置き換える。
    *   `shadcn/ui`の作法に沿って、コンポーネントの構造とスタイリングを統一する。
    *   高校生が親しみやすく、直感的に操作できるモダンなUIデザインを適用する。

- **フェーズ1：`shadcn/ui`の導入と基本コンポーネントの置き換え**
    1.  **`shadcn/ui`の初期設定:**
        *   プロジェクトに`shadcn/ui`をインストールし、設定ファイルを生成する。
        *   `tailwind.config.ts`と`globals.css`が`shadcn/ui`の推奨設定に合うように調整する。
    2.  **コアUIコンポーネントの置き換え:**
        *   `components/ui`ディレクトリ内のカスタムコンポーネント（例: `myButton.tsx`, `myLink.tsx`, `title.tsx`, `card.tsx`, `loading.tsx`, `notFound.tsx`など）を、`shadcn/ui`が提供する同等のコンポーネント（`Button`, `Link`, `Card`, `Skeleton`など）に置き換えるか、`shadcn/ui`のプリミティブを使用して再実装する。
        *   `components/ui/Icons.tsx`は`lucide-react`を使用しているため、既存のものを活用しつつ、`shadcn/ui`のアイコンの作法に合わせる。
    3.  **フォームコンポーネントの再構築:**
        *   `components/ui/formUi.tsx`は、`shadcn/ui`の`Form`コンポーネントと`Input`, `Label`などのプリミティブを使用して再構築する。

- **フェーズ2：高レベルコンポーネントの再構築**
    1.  **`components/component`ディレクトリのコンポーネントの更新:**
        *   `components/component`内の各コンポーネント（例: `Header.tsx`, `Footer.tsx`, `LessonCard.tsx`, `LessonList.tsx`など）を、フェーズ1で置き換えた`shadcn/ui`ベースのUIコンポーネントを使用して再構築する。
        *   これにより、コンポーネント全体で一貫したデザインと動作が保証される。

- **フェーズ3：ページへの適用とデザイン調整**
    1.  **各ページのUI更新:**
        *   `app/`ディレクトリ内の各ページで、フェーズ2で再構築されたコンポーネントを使用するようにコードを更新する。
    2.  **高校生向けデザインの適用:**
        *   `tailwind.config.ts`でカラーパレット、フォント、シャドウなどを調整し、明るく、親しみやすく、モダンなデザインを適用する。
        *   必要に応じて、`globals.css`で全体的なスタイルを調整する。
        *   レスポンシブデザインを考慮し、様々なデバイスで適切に表示されるように調整する。

- **フェーズ4：検証と品質保証**
    1.  **ビルドとリンティングの実行:**
        *   変更後、`npm run build`と`npm run lint`を実行し、エラーがないことを確認する。
    2.  **動作確認:**
        *   アプリケーションを起動し、各ページが正しく表示され、機能が期待通りに動作するかを確認する。

### ステップ3：コードの可読性・保守性の向上

コード全体をより分かりやすく、メンテナンスしやすい形に修正する。

- **タスク:**
    1. コンポーネントの責務を見直し、適切に分割
    2. 命名規則の統一
    3. マジックナンバー・マジックストリングの排除
    4. 型の厳格化
    5. ロジックの共通化

### ステップ4：パフォーマンス向上

アプリケーションの表示速度や応答性を改善する。

- **タスク:**
    1. 不要な再レンダリングの防止
    2. API通信の効率化
    3. バンドルサイズの削減
    4. データベースクエリの最適化
